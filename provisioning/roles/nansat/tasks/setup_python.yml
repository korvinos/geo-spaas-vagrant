---
- name: Python | Run conda install
  include_role:
    name: conda
    tasks_from: conda_install
  vars:
    conda_pkgs:
      - numpy
      - nose
      - netcdf4
      - gdal
      - pillow
      - cfunits
      - mock
      - python-dateutil

- name: Python | Add GDAL_DATA to .bashrc
  lineinfile: dest="{{ home_dir }}/.bashrc" line="export GDAL_DATA={{ conda_dir }}/share/gdal"

- name: Python | Add links to some conda libraries to /usr/lib
  become: yes
  file: src="{{ conda_dir }}/lib/{{ item }}" dest="/usr/lib/{{ item }}" state=link
  with_items:
    - libgeos_c.so
    - libgdal.so

- name: Python | Run ldconfig
  become: yes
  shell: '/sbin/ldconfig'
